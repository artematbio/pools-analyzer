# üß† –£–º–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∞–ª–µ—Ä—Ç–æ–≤ –¥–ª—è out-of-range –ø–æ–∑–∏—Ü–∏–π

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –ø–æ–∑–∏—Ü–∏—è—Ö, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã—à–ª–∏ –∏–∑ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ —Ü–µ–Ω—ã (out-of-range). –°–∏—Å—Ç–µ–º–∞ –º–∏–Ω–∏–º–∏–∑–∏—Ä—É–µ—Ç —Å–ø–∞–º, –æ—Ç–ø—Ä–∞–≤–ª—è—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.

## üîÑ –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç
- –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–∑–∏—Ü–∏–∏ –∫–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç (—Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å)
- –ü–æ–ª—É—á–∞–µ—Ç –≤—Å–µ –ø–æ–∑–∏—Ü–∏–∏ –∏–∑ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–≤—ã—Ö –∫–æ—à–µ–ª—å–∫–æ–≤
- –§–∏–ª—å—Ç—Ä—É–µ—Ç –ø–æ–∑–∏—Ü–∏–∏ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `in_range: false`

### –£–º–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏
–°–∏—Å—Ç–µ–º–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ —Å–ª–µ–¥—É—é—â–∏—Ö —Å–ª—É—á–∞—è—Ö:

1. **–ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö** üîÑ
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ out-of-range –ø–æ–∑–∏—Ü–∏–π –∏–∑–º–µ–Ω–∏–ª–æ—Å—å
   - –ü–æ—è–≤–∏–ª–∏—Å—å –Ω–æ–≤—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –∏–ª–∏ —Å—Ç–∞—Ä—ã–µ –≤–µ—Ä–Ω—É–ª–∏—Å—å –≤ –¥–∏–∞–ø–∞–∑–æ–Ω
   - –ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –ø–æ–∑–∏—Ü–∏–π (>1%)

2. **–ü–µ—Ä–≤–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ** üÜï
   - –ü–µ—Ä–≤—ã–π —Ä–∞–∑ –æ–±–Ω–∞—Ä—É–∂–µ–Ω—ã out-of-range –ø–æ–∑–∏—Ü–∏–∏ –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞

3. **–ï–∂–µ–¥–Ω–µ–≤–Ω–æ–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ** üïí
   - –ï—Å–ª–∏ –ø–æ–∑–∏—Ü–∏–∏ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å –≤ —Ç–µ—á–µ–Ω–∏–µ 24 —á–∞—Å–æ–≤
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è 1 —Ä–∞–∑ –≤ —Å—É—Ç–∫–∏ –∫–∞–∫ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ

4. **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ** ‚úÖ
   - –ö–æ–≥–¥–∞ –≤—Å–µ –ø–æ–∑–∏—Ü–∏–∏ –≤–µ—Ä–Ω—É–ª–∏—Å—å –≤ –¥–∏–∞–ø–∞–∑–æ–Ω
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏

## üìä –§–æ—Ä–º–∞—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
```
‚ö†Ô∏è OUT OF RANGE POSITIONS ALERT

2 position(s) are currently out of range:

üìç BIO/CURES
   NFT: TestMint...
   Value: $1,000.00

üìç SOL/BIO
   NFT: TestMint...
   Value: $1,500.00

üîÑ Reason: Position changes detected
Time: 2025-07-11 11:04:21 UTC
```

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏
```
‚úÖ POSITIONS BACK IN RANGE

üéâ All positions are now back in range!

Time: 2025-07-11 11:04:21 UTC
```

## üéØ –ü—Ä–∏—á–∏–Ω—ã –æ—Ç–ø—Ä–∞–≤–∫–∏

- **üîÑ Position changes detected** - –û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ø–æ–∑–∏—Ü–∏—è—Ö
- **üÜï Initial detection** - –ü–µ—Ä–≤–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ out-of-range –ø–æ–∑–∏—Ü–∏–π
- **üïí Daily reminder** - –ï–∂–µ–¥–Ω–µ–≤–Ω–æ–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ (–Ω–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π 24—á)

## üíæ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### –ù–æ–≤—ã–µ –ø–æ–ª—è –≤ AlertingSystem
```python
# –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è out-of-range –ø–æ–∑–∏—Ü–∏–π
self.last_out_of_range_positions: Optional[List[Dict[str, Any]]] = None
self.last_out_of_range_alert_time: Optional[datetime] = None
self.daily_alert_interval = timedelta(hours=24)
```

### –§—É–Ω–∫—Ü–∏—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–π
```python
def _compare_out_of_range_positions(self, current_positions, previous_positions) -> bool:
    """–°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç —Ç–µ–∫—É—â–∏–µ –∏ –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –¥–ª—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π"""
    # –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ–∑–∏—Ü–∏–π
    # –°—Ä–∞–≤–Ω–µ–Ω–∏–µ mint-–∞–¥—Ä–µ—Å–æ–≤
    # –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å—Ç–æ–∏–º–æ—Å—Ç–∏ (>1%)
```

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∏

### –ò–Ω—Ç–µ—Ä–≤–∞–ª –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π
```python
self.daily_alert_interval = timedelta(hours=24)  # –ú–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å
```

### –ü–æ—Ä–æ–≥ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–æ–∏–º–æ—Å—Ç–∏
```python
change_percent > 1.0  # 1% - –ø–æ—Ä–æ–≥ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:
```bash
python3 test_smart_alerting.py
```

–¢–µ—Å—Ç—ã –ø–æ–∫—Ä—ã–≤–∞—é—Ç –≤—Å–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:
- –ü–µ—Ä–≤–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –ï–∂–µ–¥–Ω–µ–≤–Ω–æ–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ
- –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è

### –ë—ã–ª–æ (—Å—Ç–∞—Ä–∞—è —Å–∏—Å—Ç–µ–º–∞)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç
- –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ out-of-range –ø–æ–∑–∏—Ü–∏–π
- Rate limiting 30 –º–∏–Ω—É—Ç (–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π)

### –°—Ç–∞–ª–æ (–Ω–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
- –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö –ò–õ–ò —Ä–∞–∑ –≤ —Å—É—Ç–∫–∏
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–∑–∏—Ü–∏–π
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏

## üéâ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

1. **–ú–µ–Ω—å—à–µ —Å–ø–∞–º–∞** - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
2. **–ë–æ–ª—å—à–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏** - –£–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏—á–∏–Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏
3. **–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π** - –ü–æ–Ω—è—Ç–Ω–æ, —á—Ç–æ –∏–º–µ–Ω–Ω–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å
4. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏** - –ó–Ω–∞–µ—Ç–µ, –∫–æ–≥–¥–∞ –ø—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞
5. **–ì–∏–±–∫–æ—Å—Ç—å** - –õ–µ–≥–∫–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –ø–æ–¥ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏

## üìù –õ–æ–≥–∏

–°–∏—Å—Ç–µ–º–∞ –≤–µ–¥–µ—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏:
```
üìä Out-of-range positions changed: 3 positions
üìä First out-of-range check: 2 positions
üìä Daily out-of-range reminder: 2 positions
üìä Out-of-range positions unchanged, next alert in 12.5 hours
‚úÖ Recovery alert sent - all positions back in range
```

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

–ò–∑–º–µ–Ω–µ–Ω–∏—è —É–∂–µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã –≤:
- `alerting.py` - –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞
- `scheduler.py` - –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
- `test_smart_alerting.py` - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ production –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫! 